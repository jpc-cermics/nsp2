SHELL = /bin/sh

include ../Makefile.incl

SCIDIRS = zcalelm objects interp functions gtk2 \
	system graphics-old graphics-new menus gtksci \
	@GZVT@ modules gobjects types-test librand \
	libcdf @MPLUSLIBDIR@ libfft libinteg libapprox libspmf lapack \
	libminpack liboptim @PVMNSPDIR@ @BLAS_LOCAL@ @LAPACK_LOCAL@ @LIBXDR_LOCAL@ @SNDFILE_LIB@ @UFSPARSE_LIB@ @PORTAUDIO_LIB@ @GRAPHVIZ_LIB@ @GLPK_LIB@ 

ALLSCIDIRS =zcalelm objects interp functions gtk2 \
	system graphics-old graphics-new menus gtksci \
	gzvt2 modules gobjects types-test librand \
	libcdf libmaxplus libfft libinteg libapprox libspmf lapack \
	libminpack liboptim \
	libpvm libblas liblapack libxdr libsndfile libumfpack libportaudio \
	libgraphviz libglpk 


SUBDIRS = $(DLD_SUBDIR) $(SCIDIRS) 
ALLSUBDIRS = $(DLD_SUBDIR) $(ALLSCIDIRS) 

all clean distclean ::
	@case '${MFLAGS}' in *[ik]*) set +e;; esac; \
	for i in $(SUBDIRS) ;\
	do \
		(cd $$i && echo "making $@ in src/$$i " && \
		$(MAKE) $(MFLAGS) -s $@ ); \
	   	IER=$$? &&\
	   	case $$IER in\
	    	0) ;;\
	    	*) echo "Cannot make $@ in sub directory $$d";\
	       	  exit $$IER;;\
	   	esac;\
	done
